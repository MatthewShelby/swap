<html lang="en">

<head>
      <title>DEX front</title>
      <link rel="stylesheet" href="assets/fonts.css">
      <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>




      <div>
            <div class="my-body" id="bodybg">
                  <div class="glass">
                        <!-- #region Header and ovelrlay -->
                        <div id="chainbox" class="vercenter">
                              <span class="vercenter">
                                    <label class="label-1">Selected Chain:</label>
                                    <div class="dropdown vercenter">
                                          <button class="dropbtn " id="chainselectorbtn" onclick="openChainSelect()">
                                                <img src="./assets/images/BSCCH.png" id="selectedChainImg"
                                                      class="menuImg " alt="">
                                                <span id="selectedChainName"> BSC </span>
                                                <span> <img src="assets/images/Icons/ar-hdh-dwn.svg" class="menuIcon "
                                                            alt="click to open" title="click to open">
                                                </span>

                                          </button>
                                          <div id="myDropdown" class="dropdown-content">
                                                <span class="chain-opt">
                                                      <img src="assets/images/ETHCH.png" class="menuImg" alt="">
                                                      <span> Ethereum <br> ( Coming soon ) </span>
                                                </span>
                                                <span class="chain-opt" onclick="ChsinSelectBSC()"><img
                                                            src="assets/images/BSCCH.png" class="menuImg" alt="">
                                                      <span> Binance Smart Chain </span>
                                                </span>

                                          </div>
                                    </div>
                              </span>
                              <span>
                                    <button class="dropbtn" onclick="connectWallet()" id="cn-wlt-btn">
                                          <span class="cnw vercenter"> Connect Wallet</span>
                                    </button>
                                    <div class="dropdiv" id="cn-wlt-div">
                                          <span class="cnw vercenter">
                                                <span>
                                                      <img src="assets/images/Icons/MetaMask.svg" alt=""
                                                            id="cn-wlt-icon">
                                                </span> &nbsp;&nbsp;
                                                <span id="wltAdr">

                                                </span>
                                          </span>
                                    </div>
                              </span>

                        </div>


                        <br>
                        <br>
                        <br>
                        <br>


                        <div id="overlay" class="vercenter">
                              <div class="loadingio-spinner-eclipse-s2xqrchhj7">
                                    <div class="ldio-z9ztwszgbu">
                                          <div></div>
                                    </div>
                              </div>
                        </div>

                        <!-- #endregion Header and ovelrlay -->


                        <div id="tokenOP">

                              <div class="tokenOp-header row vercenter">
                                    <div class="row vercenter">
                                          <span class="he-heading"> Swap</span>
                                          <span class="he-text"> Trade tokens in an instant</span>
                                    </div>
                                    <div>
                                          <span class=" vercenter row">
                                                <img src="assets/images/Icons/gear.svg" class="settingImg" alt=""
                                                      id="os">
                                          </span>
                                    </div>
                              </div>
                              <div class="settings " id="cdiv">
                                    <b>Slippage:</b>
                                    <span onclick="slippageSelect(1)" id="s1"> 1% </span>
                                    <span onclick="slippageSelect(2)" id="s2" class="active"> 2% </span>
                                    <span onclick="slippageSelect(5)" id="s5"> 5% </span>
                              </div>
                              <script>

                              </script>
                              <div style="padding: 4px 16px; ">
                                    <hr>
                              </div>
                              <div id="ft" class="tokenBox">
                                    <div class="row">
                                          Pay:
                                          <div class="cToken" id="payToken" onclick="payTokenOpen()">
                                                <img src="./assets/images/coin/bnblight.png" class="tokenBoxImg"
                                                      id="payTokenImg" alt="">
                                                <span class="tokenName" id="payTokenName">---</span>
                                                <span> <img src="assets/images/Icons/ar-hd-dwn-gray.svg"
                                                            class="menuIcon-sm-black" alt="click to open"
                                                            title="click to open">
                                                </span>
                                          </div>
                                    </div>

                                    <div id="payDropdownFrm" class="dropdown-content dropdown-frame">
                                          <div id="payDropdown" class="dropdown-content mscrollbar dropdown-inside">
                                                <!-- <span class="chain-opt" onclick="payToeknSelect('WETH')">
                                          <img src="assets/images/ETHCH.png" class="menuImg" alt="">
                                          <span> Ethereum </span>
                                    </span>
                                    <span class="chain-opt" onclick="payToeknSelect('WBNB')"><img
                                                src="assets/images/BSCCH.png" class="menuImg" alt="">
                                          <span> Binance Smart Chain </span>
                                    </span> -->
                                          </div>
                                    </div>

                                    <input type="number" class=" amuToken amuText" value="0.0" id="payTokenInput"
                                          step="any">
                                    </input>
                              </div>
                              <div style="padding: 4px 16px; " class="row vercenter around">
                                    <span style="width: 45%;">
                                          <hr>
                                    </span>
                                    <img src="assets/images/Icons/ar-dw-change-white.svg" alt=""
                                          style="max-width: 32px; cursor: pointer;" id="switch-btn"
                                          onclick="switcher()">
                                    <img src="./assets/images/Loding.gif" alt="" style="width: 32px; display: none;"
                                          id="switch-wait">
                                    <span style="width: 45%;">
                                          <hr>
                                    </span>
                              </div>
                              <div id="st" class="tokenBox">
                                    <div class="row">
                                          Receive:
                                          <div class="cToken" onclick="receiveTokenOpen()">
                                                <img src="./assets/images/coin/bnblight.png" class="tokenBoxImg"
                                                      id="receiveTokenImg" alt="">
                                                <span class="tokenName" id="receiveTokenName">BNB</span>
                                                <span> <img src="assets/images/Icons/ar-hd-dwn-gray.svg"
                                                            class="menuIcon-sm-black" alt="click to open"
                                                            title="click to open">
                                                </span>
                                          </div>
                                    </div>
                                    <div id="receiveDropdownFrm" class="dropdown-content dropdown-frame">

                                          <div id="receiveDropdown" class="dropdown-content mscrollbar dropdown-inside">
                                          </div>
                                    </div>
                                    <input type="number" class=" amuToken amuText" value="0.0" id="receiveTokenInput">
                                    </input>

                              </div>
                              <!-- <div style="padding: 4px 16px; ">
                              <hr>
                        </div> -->


                              <!-- The part for showing the fetched price -->


                              <div class="actionButtons vercenter row around"
                                    style="justify-content: center;height: 0px;">
                                    <span id="fetchedPrice" class="explain">
                                    </span>
                                    <span id="fetchedPriceWait" class="explain">
                                          <img src="assets/images/Pulse1.svg" alt="" style="max-width: 20px;">
                                    </span>

                              </div>

                              <div style="padding: 4px 16px; ">
                                    <hr>
                              </div>

                              <!-- End -->




                              <style>
                                    .tokenImg {
                                          display: flex;
                                          text-align: center;
                                    }

                                    .tokenSym {
                                          display: flex;
                                          text-align: center;
                                    }

                                    .tokenSym span {
                                          max-width: 1rem;
                                    }

                                    .actionButtons {
                                          color: #ffffff;
                                          padding: 4px 16px;
                                          font-size: 0.8rem;
                                          font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
                                    }

                                    .op-buttons button:hover {
                                          background-color: #ffffff99;

                                    }

                                    .op-buttons button:disabled {
                                          /* background-color: #ffffff44; */
                                          background-color: #7e7b7bc9;
                                          color: #1e3e52;
                                          border-color: #1e3e52;
                                          cursor: auto;

                                    }

                                    .op-buttons button {
                                          padding: 7px 12px 7px 12px;
                                          border: #146ba3 3px solid;
                                          color: #146ba3;
                                          font-size: 1rem;
                                          border-radius: 6px;
                                          cursor: pointer;
                                          font-weight: 600;
                                          background-color: #ffffffcc;
                                          text-transform: uppercase
                                    }
                              </style>
                              <div>
                                    <div class="actionButtons vercenter row around">
                                          <span class="explain" id="allowTXT">You need to Set Allowance
                                                <br> for the Operator Contract
                                                <br> On the Paying Currency. </span>
                                          <span id="allowWaiting">
                                                <img src="./assets/images/Loding.gif" style="max-width: 32px;" alt="">
                                          </span>
                                          <span class="op-buttons">
                                                <!-- <button class="op-rq">Re-Quote</button> -->
                                                <button class="op-ga" id="allowanceBtn"
                                                      title="Increase Allowance">Approve</button>
                                                <button class="op-sw" disabled id="swapBtn">Swap</button>
                                          </span>
                                    </div>
                              </div>
                              <br>
                        </div>
                        <br>

                        <div class="horcenter">
                              <p class="fott-p">Designed and developed by <a
                                          href="mailto:matthewshelb@gmail.com">Matthew
                                          Shelby</a></p>
                              <br>
                        </div>
                  </div>
            </div>
      </div>



      <style>
            .glass {

                  background: rgba(255, 255, 255, 0.33);
                  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2);
                  backdrop-filter: blur(6.6px);
                  -webkit-backdrop-filter: blur(6.6px);
            }
      </style>

      <!-- #region JS SRCs -->
      <!-- Jquery -->
      <script src="https://code.jquery.com/jquery-3.7.0.js"
            integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>
      <!-- <script type="text/javascript" src="./node_modules/jquery/dist/jquery.js"></script> -->


      <!-- Ethers -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.0/ethers.umd.min.js"
            integrity="sha512-+Ftowzj6zmwHlez4gpQxd7QQUzK/ocgu10pukN3Pyqblni7yJ9r/WTpNHoYKL4DGOp5givxSUZjJcVY7Az9OAQ=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
      <!-- <script type="text/javascript" src="./node_modules/ethers/dist/ethers.umd.js"></script> -->

      <!-- Const Variables -->
      <script src="./assets/js/const.js"></script>

      <!-- Operation -->
      <script src="./assets/js/main.js"></script>

      <!-- Metamask Wallet -->
      <script src="./assets/js/wallet.js"></script>

      <!-- #endregion -->
      <script>

            $(document).ready(() => {
                  waitingOn()
                  console.log('Ready => Start')

                  //waitingOff()
                  addEf()
                  checkHealth()
                  bg()
                  //ChsinSelectBSC()
                  //waitingOff()
            })

            function getDecimals(n) {
                  var token = chainTokens[0];
                  var Contract = new ethers.Contract(token.address, ERC20ABI, signer);
                  Contract.symbol().then((res) => {
                        console.log(token.symbol + ' decimal place is: ' + res)
                  })
            }

            function changeWallet() {
                  window.ethereum.request({
                        method: 'wallet_switchEthereumChain', params: [{ chainId: '0x1' }]
                        // method: "wallet_addEthereumChain",
                        // params: [{
                        //       chainId: "0x1",
                        //       rpcUrls: ["https://mainnet.infura.io/v3/"],
                        //       chainName: "Ethereum Mainnet",
                        //       nativeCurrency: {
                        //             name: "ETH",
                        //             symbol: "ETH",
                        //             decimals: 18
                        //       },
                        //       blockExplorerUrls: ["https://etherscan.io"]
                        // }]
                  }).then((res) => {
                        console.info(res)
                  });
            }


            function bg() {
                  var bgnum = Math.floor(Math.random() * 3) + 1
                  console.log(document.getElementById('bodybg').style.backgroundImage = 'url("./assets/images/background/bg(' + bgnum + ').png"')

            }



      </script>
</body>

</html>